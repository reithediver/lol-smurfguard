<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Smurf Detection System - Demo</title>
    <link rel="stylesheet" href="../src/components/SmurfAnalysisDisplay.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 0;
        }
        
        .demo-header h1 {
            margin: 0;
            font-size: 36px;
            font-weight: 700;
        }
        
        .demo-header p {
            margin: 16px 0 0 0;
            font-size: 18px;
            opacity: 0.9;
        }
        
        .demo-controls {
            background: white;
            padding: 20px;
            margin: 0 20px 20px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .demo-controls label {
            font-weight: 600;
            color: #495057;
        }
        
        .demo-controls select,
        .demo-controls input {
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .demo-controls button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .demo-controls button:hover {
            background: #0056b3;
        }
        
        .performance-note {
            background: #e7f3ff;
            border: 1px solid #b8daff;
            border-radius: 4px;
            padding: 12px;
            margin: 0 20px 20px 20px;
            color: #004085;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>Advanced Smurf Detection System</h1>
        <p>Professional analysis interface for detecting account anomalies and playstyle inconsistencies</p>
    </div>
    
    <div class="demo-controls">
        <label for="playerSelect">Sample Player:</label>
        <select id="playerSelect">
            <option value="suspicious_smurf">Suspicious Smurf (High Detection)</option>
            <option value="obvious_smurf">Obvious Smurf (Very High Detection)</option>
            <option value="legitimate_player">Legitimate Player (Low Detection)</option>
            <option value="improving_player">Improving Player (Moderate Detection)</option>
        </select>
        
        <label for="analysisType">Analysis Type:</label>
        <select id="analysisType">
            <option value="hybrid">Full Hybrid Analysis</option>
            <option value="quick">Quick Analysis Only</option>
            <option value="deep">Deep Analysis Only</option>
        </select>
        
        <button onclick="generateAnalysis()">Generate Analysis</button>
        <button onclick="exportResults()">Export Results</button>
    </div>
    
    <div class="performance-note">
        <strong>Performance Metrics:</strong> Quick Analysis: &lt;200ms | Deep Analysis: 2-5s | Hybrid Analysis: &lt;300ms
    </div>
    
    <div id="analysis-container"></div>
    
    <script type="module">
        // Mock data generator for different player types
        const mockData = {
            suspicious_smurf: {
                playerName: "SuspiciousPlayer2023",
                quick: {
                    responseTime: 150,
                    suspicionLevel: "high",
                    quickFlags: [
                        "Exceptional CS efficiency for account level (95th percentile)",
                        "KDA significantly above rank average",
                        "Vision score inconsistent with historical performance"
                    ],
                    rankComparison: [
                        {
                            metric: "CS per Minute",
                            playerValue: 7.8,
                            rankAverage: 5.5,
                            percentile: 96.5,
                            deviation: 0.42,
                            status: "exceptional",
                            suspiciousLevel: 85
                        },
                        {
                            metric: "KDA",
                            playerValue: 3.9,
                            rankAverage: 2.4,
                            percentile: 93.2,
                            deviation: 0.625,
                            status: "exceptional",
                            suspiciousLevel: 75
                        },
                        {
                            metric: "Kill Participation",
                            playerValue: 78,
                            rankAverage: 61,
                            percentile: 89.1,
                            deviation: 0.28,
                            status: "above_average",
                            suspiciousLevel: 45
                        },
                        {
                            metric: "Vision Score",
                            playerValue: 32,
                            rankAverage: 24,
                            percentile: 87.3,
                            deviation: 0.33,
                            status: "above_average",
                            suspiciousLevel: 40
                        }
                    ],
                    recentMatches: Array(20).fill(null).map((_, i) => ({ id: i }))
                },
                deep: {
                    historicalData: {
                        totalMatches: 156,
                        timeSpanMonths: 3,
                        oldestMatch: new Date('2024-01-15'),
                        newestMatch: new Date('2024-04-15')
                    },
                    playstyleEvolution: {
                        overallSuspicionScore: 78,
                        shifts: [
                            {
                                timestamp: new Date('2024-02-20'),
                                type: "dramatic",
                                confidence: 0.89,
                                description: "Dramatic playstyle improvement: CS improved by 45.2%, KDA improved by 62.8%",
                                metrics: {
                                    csImprovement: 0.452,
                                    kdaImprovement: 0.628,
                                    visionImprovement: 0.234,
                                    championPoolChange: 0.73,
                                    complexityIncrease: 0.41
                                },
                                suspicionScore: 82
                            }
                        ],
                        championEvolution: [
                            {
                                championName: "Yasuo",
                                timeWindows: [
                                    {
                                        period: "early",
                                        games: 8,
                                        winRate: 0.375,
                                        averageKDA: 1.2,
                                        averageCS: 4.1,
                                        skillProgression: 0
                                    },
                                    {
                                        period: "late",
                                        games: 12,
                                        winRate: 0.833,
                                        averageKDA: 4.1,
                                        averageCS: 7.9,
                                        skillProgression: 8.7
                                    }
                                ],
                                suspicionFlags: {
                                    tooGoodTooFast: true,
                                    suddenExpertise: true,
                                    metaShift: false,
                                    complexityJump: true
                                }
                            },
                            {
                                championName: "Azir",
                                timeWindows: [
                                    {
                                        period: "early",
                                        games: 3,
                                        winRate: 0.33,
                                        averageKDA: 0.9,
                                        averageCS: 3.8,
                                        skillProgression: 0
                                    },
                                    {
                                        period: "late",
                                        games: 15,
                                        winRate: 0.87,
                                        averageKDA: 3.8,
                                        averageCS: 8.2,
                                        skillProgression: 9.1
                                    }
                                ],
                                suspicionFlags: {
                                    tooGoodTooFast: true,
                                    suddenExpertise: true,
                                    metaShift: true,
                                    complexityJump: true
                                }
                            }
                        ]
                    },
                    smurfIndicators: {
                        accountSwitchingPattern: true,
                        skillInconsistency: true,
                        championMasteryAnomalies: true,
                        performanceOutliers: false
                    },
                    confidenceScore: 87
                },
                recommendation: {
                    action: "flag",
                    confidence: 78,
                    reasoning: [
                        "High suspicion from recent performance analysis",
                        "Deep historical analysis shows strong smurf indicators",
                        "Multiple dramatic playstyle shifts detected"
                    ],
                    evidence: [
                        "CS per minute in 96th percentile for rank",
                        "Account switching pattern detected",
                        "Unusual champion mastery progression",
                        "2 significant playstyle shifts detected"
                    ]
                }
            },
            
            obvious_smurf: {
                playerName: "TotallyNotSmurf",
                quick: {
                    responseTime: 95,
                    suspicionLevel: "very_high",
                    quickFlags: [
                        "Exceptional performance across all metrics",
                        "Low level account with professional-level mechanics",
                        "Perfect CS efficiency inconsistent with account age"
                    ],
                    rankComparison: [
                        {
                            metric: "CS per Minute",
                            playerValue: 9.2,
                            rankAverage: 5.1,
                            percentile: 99.8,
                            deviation: 0.80,
                            status: "exceptional",
                            suspiciousLevel: 95
                        },
                        {
                            metric: "KDA",
                            playerValue: 6.7,
                            rankAverage: 2.2,
                            percentile: 99.5,
                            deviation: 2.05,
                            status: "exceptional",
                            suspiciousLevel: 90
                        }
                    ],
                    recentMatches: Array(20).fill(null).map((_, i) => ({ id: i }))
                },
                recommendation: {
                    action: "ban_recommend",
                    confidence: 95,
                    reasoning: ["Extremely high suspicion across all metrics"],
                    evidence: ["99th+ percentile performance", "Account age inconsistency"]
                }
            },
            
            legitimate_player: {
                playerName: "HonestGamer",
                quick: {
                    responseTime: 180,
                    suspicionLevel: "low",
                    quickFlags: [],
                    rankComparison: [
                        {
                            metric: "CS per Minute",
                            playerValue: 5.3,
                            rankAverage: 5.5,
                            percentile: 47.2,
                            deviation: -0.04,
                            status: "average",
                            suspiciousLevel: 5
                        },
                        {
                            metric: "KDA",
                            playerValue: 2.1,
                            rankAverage: 2.4,
                            percentile: 42.8,
                            deviation: -0.125,
                            status: "average",
                            suspiciousLevel: 0
                        }
                    ],
                    recentMatches: Array(20).fill(null).map((_, i) => ({ id: i }))
                },
                recommendation: {
                    action: "allow",
                    confidence: 15,
                    reasoning: ["Performance consistent with rank expectations"],
                    evidence: ["No statistical anomalies detected"]
                }
            }
        };
        
        // Make the SmurfAnalysisDisplay class available globally
        window.SmurfAnalysisDisplay = class SmurfAnalysisDisplay {
            constructor(analysisResult, playerName) {
                this.analysisResult = analysisResult;
                this.playerName = playerName;
            }
            
            generateHTML() {
                const { quick, deep, recommendation } = this.analysisResult;
                
                // Generate the same HTML as in the TypeScript file
                return \`
                    <div class="smurf-analysis-container">
                        <div class="analysis-header">
                            <div class="player-info">
                                <h1 class="player-name">\${this.playerName}</h1>
                                <div class="analysis-timestamp">
                                    Analysis completed • Response time: \${quick.responseTime}ms
                                </div>
                            </div>
                            <div class="suspicion-badge">
                                <div class="suspicion-level \${quick.suspicionLevel}">
                                    \${quick.suspicionLevel.toUpperCase().replace('_', ' ')}
                                </div>
                                <div class="confidence-score">
                                    Confidence: \${recommendation.confidence}%
                                </div>
                            </div>
                        </div>
                        
                        \${quick.quickFlags.length > 0 ? \`
                            <div class="quick-flags-section">
                                <h3>Immediate Concerns</h3>
                                <div class="flags-container">
                                    \${quick.quickFlags.map(flag => \`<div class="flag-item">\${flag}</div>\`).join('')}
                                </div>
                            </div>
                        \` : ''}
                        
                        <div class="section-container">
                            <h3>Performance vs Rank Average</h3>
                            <div class="table-container">
                                <table class="comparison-table">
                                    <thead>
                                        <tr>
                                            <th>Metric</th>
                                            <th>Player Value</th>
                                            <th>Rank Average</th>
                                            <th>Percentile</th>
                                            <th>Deviation</th>
                                            <th>Status</th>
                                            <th>Suspicion Level</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        \${quick.rankComparison.map(comparison => \`
                                            <tr class="\${comparison.suspiciousLevel > 50 ? 'suspicious-row' : ''}">
                                                <td class="metric-name">\${comparison.metric}</td>
                                                <td class="player-value">\${comparison.playerValue.toFixed(2)}</td>
                                                <td class="rank-average">\${comparison.rankAverage.toFixed(2)}</td>
                                                <td class="percentile">
                                                    <span class="\${comparison.percentile >= 95 ? 'outlier' : ''}">
                                                        \${comparison.percentile.toFixed(1)}th
                                                    </span>
                                                </td>
                                                <td class="deviation">
                                                    <span class="\${Math.abs(comparison.deviation) > 2 ? 'high-deviation' : ''}">
                                                        \${(comparison.deviation * 100).toFixed(1)}%
                                                    </span>
                                                </td>
                                                <td class="status">
                                                    <span class="status-badge" style="background-color: \${this.getStatusColor(comparison.status)}">
                                                        \${comparison.status.replace('_', ' ')}
                                                    </span>
                                                </td>
                                                <td class="suspicion-level">
                                                    <div class="suspicion-bar">
                                                        <div class="suspicion-fill" style="width: \${comparison.suspiciousLevel}%; background-color: \${this.getSuspicionColor(comparison.suspiciousLevel)}"></div>
                                                        <span class="suspicion-text">\${comparison.suspiciousLevel}</span>
                                                    </div>
                                                </td>
                                            </tr>
                                        \`).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="section-container recommendation-section">
                            <h3>Analysis Recommendation</h3>
                            <div class="recommendation-card">
                                <div class="recommendation-header">
                                    <div class="action-badge \${recommendation.action}">
                                        \${recommendation.action.toUpperCase().replace('_', ' ')}
                                    </div>
                                    <div class="confidence-display">
                                        Confidence: \${recommendation.confidence}%
                                    </div>
                                </div>
                                <div class="recommendation-content">
                                    <div class="reasoning-section">
                                        <h4>Reasoning</h4>
                                        <ul>
                                            \${recommendation.reasoning.map(reason => \`<li>\${reason}</li>\`).join('')}
                                        </ul>
                                    </div>
                                    <div class="evidence-section">
                                        <h4>Supporting Evidence</h4>
                                        <ul>
                                            \${recommendation.evidence.map(evidence => \`<li>\${evidence}</li>\`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                \`;
            }
            
            getStatusColor(status) {
                switch (status) {
                    case 'exceptional': return '#ff4757';
                    case 'above_average': return '#ffa502';
                    case 'average': return '#2ed573';
                    case 'below_average': return '#70a1ff';
                    case 'far_below': return '#5352ed';
                    default: return '#ffffff';
                }
            }
            
            getSuspicionColor(level) {
                if (level >= 80) return '#ff3838';
                if (level >= 60) return '#ff6348';
                if (level >= 40) return '#ffa502';
                if (level >= 20) return '#f1c40f';
                return '#2ed573';
            }
        };
        
        // Make functions available globally
        window.generateAnalysis = function() {
            const playerType = document.getElementById('playerSelect').value;
            const analysisType = document.getElementById('analysisType').value;
            const data = mockData[playerType];
            
            const display = new window.SmurfAnalysisDisplay(data, data.playerName);
            document.getElementById('analysis-container').innerHTML = display.generateHTML();
        };
        
        window.exportResults = function() {
            const content = document.getElementById('analysis-container').innerHTML;
            if (!content) {
                alert('Please generate an analysis first');
                return;
            }
            
            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'smurf-analysis-results.html';
            a.click();
            URL.revokeObjectURL(url);
        };
        
        // Load default analysis
        window.generateAnalysis();
    </script>
</body>
</html> 